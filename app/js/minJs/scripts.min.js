function canvas(a){var e=document.getElementById("canvas_map"),i=e.getContext("2d"),t=document.getElementById("img"),c=window.innerWidth/3094;e.width=window.innerWidth,e.height=1560*c,i.drawImage(t,0,0,3094*c,1560*c),a.forEach(function(e,t){positionIcon=calculatedPositon(a[t]);var n=typeAccidents(a[t]),s=colorIcon(n);i.font="36px Material Icons",i.fillStyle=s,i.fillText(n,positionIcon.x*c,positionIcon.y*c)})}function calculatedPositon(e){var t,n,s={x:0,y:0};return t=e.point.x-12.94303529912,n=52.64611109803-e.point.y,s.x=Math.round(t/.00034508963),s.y=Math.round(n/.00020789677),s}function removeHideClass(e){for(var t=3;t<e.childNodes.length;t+=2)e.childNodes[t].classList.remove("secondary-text__hidden")}function removeSelectedClass(e){e.classList.remove("mdc-list-item_selected")}function changeIconToClear(e){e.innerHTML="clear"}function showDetails(e){var t=e.childNodes[2],n=e.childNodes[4];addSelectedClass(e),removeHideClass(t),changeIconToClear(n)}function addHideClass(e){for(var t=3;t<e.childNodes.length;t+=2)e.childNodes[t].classList.add("secondary-text__hidden")}function addSelectedClass(e){e.classList.add("mdc-list-item_selected")}function changeIconToArrow(e){e.innerHTML="arrow_drop_down"}function hideDetails(e){var t=e.childNodes[2],n=e.childNodes[4];removeSelectedClass(e),addHideClass(t),changeIconToArrow(n)}function changeState(){this.classList.contains("mdc-list-item_selected")?hideDetails(this):showDetails(this)}function loadAccidents(){var t=new XMLHttpRequest;t.open("GET","js/incidents.json",!0),t.send(),t.onreadystatechange=function(){if(4===t.readyState)if(200!==t.status)alert(t.status+": "+t.statusText);else try{var e=JSON.parse(t.responseText);createLiElements(e),canvas(e)}catch(e){alert("Error "+e.message)}}}function typeAccidents(e){var t;switch(e.type){case 1:t="error";break;case 2:t="warning";break;case 3:t="location_off";break;default:t="clear"}return t}function colorIcon(e){var t;switch(e){case"warning":t="#F06400";break;case"error":t="#C30000";break;case"location_off":t="#0200AB";break;default:t="#000000"}return t}function createLiElement(e){var t=typeAccidents(e);return liElement=document.createElement("li"),liElement.className="mdc-list-item",liElement.innerHTML='<span class="mdc-list-item__graphic material-icons md-36 orange600" aria-hidden="true">'+t+'</span>\n<span class="mdc-list-item__text">'+e.details+" on "+e.from+'\n<span class="mdc-list-item__secondary-text">'+e.id+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">Type : '+e.type+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">Position : x: '+e.point.x+", y: "+e.point.y+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">From: '+e.from+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">To: '+e.to+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">Details: '+e.details+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">Delay: '+e.delay+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">Magnitude: '+e.magnitude+'</span>\n</span>\n<span class="mdc-list-item__meta material-icons md-36" aria-hidden="true">arrow_drop_down</span>',liElement.onclick=changeState,liElement}function createLiElements(e){var t,n=document.getElementById("accidentsList");sortingAccidentList(e),e.forEach(function(e){t=createLiElement(e),n.insertBefore(t,n.firstChild)})}function sortingAccidentList(e){for(var t=0;t<e.length;t++)for(var n=t;0!==n;)e[n-1].delay<e[n].delay&&swapLiElements(e,n-1,n),n--;return e}function swapLiElements(e,t,n){var s;s=e[n],e[n]=e[t],e[t]=s}loadAccidents();