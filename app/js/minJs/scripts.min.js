function showPage(){document.getElementById("loader").style.display="none",document.getElementById("headTitle").style.display="block",document.getElementById("app").style.display="block"}function draw(e){deleteLiElements(),createLiElements(e),SvgMap(),deleteSvgIcons(),createSvgIcons(e)}function test(){window.addEventListener("load",function(e){loadAccidents(),setTimeout(function(){showPage()},500)})}function removeHideClass(e){for(var t=3;t<e.childNodes.length;t+=2)e.childNodes[t].classList.remove("secondary-text__hidden")}function removeSelectedClass(e){e.classList.remove("mdc-list-item_selected")}function changeIconToClear(e){e.innerHTML="clear"}function showDetails(e){var t=e.childNodes[2],n=e.childNodes[4];addSelectedClass(e),removeHideClass(t),changeIconToClear(n)}function addHideClass(e){for(var t=3;t<e.childNodes.length;t+=2)e.childNodes[t].classList.add("secondary-text__hidden")}function addSelectedClass(e){e.classList.add("mdc-list-item_selected")}function changeIconToArrow(e){e.innerHTML="arrow_drop_down"}function hideDetails(e){var t=e.childNodes[2],n=e.childNodes[4];removeSelectedClass(e),addHideClass(t),changeIconToArrow(n)}function changeState(){this.classList.contains("mdc-list-item_selected")?hideDetails(this):showDetails(this)}function loadAccidents(){var e=new XMLHttpRequest;e.open("GET","js/incidents.json",!0),e.send(),e.onreadystatechange=function(){if(4===e.readyState)if(200!==e.status)alert(e.status+": "+e.statusText);else try{draw(JSON.parse(e.responseText))}catch(e){alert("Error "+e.message)}}}function typeAccidents(e){var t;switch(e.type){case 1:t="error";break;case 2:t="warning";break;case 3:t="location_off";break;default:t="clear"}return t}function createLiElements(e){var t,n=document.getElementById("accidentsList");sortingAccidentList(e),e.forEach(function(e){t=createLiElement(e),n.insertBefore(t,n.firstChild)})}function deleteLiElements(){for(var e=document.getElementById("accidentsList"),t=e.children.length,n=0;n<t;n++)e.removeChild(e.children[0])}function createLiElement(e){var t=typeAccidents(e);return liElement=document.createElement("li"),liElement.className="mdc-list-item",liElement.innerHTML='<span class="mdc-list-item__graphic material-icons md-36 orange600" aria-hidden="true">'+t+'</span>\n<span class="mdc-list-item__text">'+e.details+" on "+e.from+'\n<span class="mdc-list-item__secondary-text">'+e.id+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">Type : '+e.type+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">Position : x: '+e.point.x+", y: "+e.point.y+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">From: '+e.from+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">To: '+e.to+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">Details: '+e.details+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">Delay: '+e.delay+'</span>\n<span class="mdc-list-item__secondary-text secondary-text__hidden">Magnitude: '+e.magnitude+'</span>\n</span>\n<span class="mdc-list-item__meta material-icons md-36" aria-hidden="true">arrow_drop_down</span>',liElement.onclick=changeState,liElement}function sortingAccidentList(e){for(var t=0;t<e.length;t++)for(var n=t;0!==n;)e[n-1].delay<e[n].delay&&swapLiElements(e,n-1,n),n--;return e}function swapLiElements(e,t,n){var s;s=e[n],e[n]=e[t],e[t]=s}function SvgMap(){var e=document.getElementById("svgMap"),t=document.getElementById("svgMapBackground"),n=(document.getElementById("img"),window.innerWidth/3094*.75),s=.75*window.innerWidth,i=1560*n;window.innerWidth<=1200&&(n=window.innerWidth/3094,s=window.innerWidth,i=1560*n),e.setAttribute("height",i),e.setAttribute("width",s),t.setAttribute("height",i),t.setAttribute("width",s)}function deleteSvgIcons(){var e=document.getElementById("svgMap"),t=e.children.length;console.log(t);for(var n=0;n<t-1;n++)e.removeChild(e.children[1])}function createSvgIcons(s){var i=document.getElementById("svgMap");window.innerWidth;s.forEach(function(e,t){var n=createSvgIcon(s[t]);i.insertBefore(n,i.lastChild)})}function createSvgIcon(e){var t,n=calculatedPositon(e),s=typeSvgIcon(typeAccidents(e)),i=window.innerWidth/3094*.75,a=36*i*2.5;return window.innerWidth<=1200&&(i=window.innerWidth/3094),(t=document.createElementNS("http://www.w3.org/2000/svg","svg")).className="svgIcon",t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("width",a),t.setAttribute("height",a),t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("x",n.x*i),t.setAttribute("y",n.y*i),t.innerHTML=s,t}function typeSvgIcon(e){var t,n='<path d="M0 0h24v24H0z" fill="none"></path>',s='<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" fill="#ED1C24" stroke=\'rgba(0, 0, 0, 0.2)\'></path>';switch(e){case"warning":t=n+'<path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" fill="#F1DD1C" stroke=\'rgba(0, 0, 0, 0.3)\'></path>';break;case"error":t=n+s;break;case"location_off":t='<path d="M0 0h24v24H0zm11.75 11.47l-.11-.11z" fill="none"/></path>\n<path fill="#AF00A0" stroke=\'rgba(0, 0, 0, 0.25)\' d="M12 6.5c1.38 0 2.5 1.12 2.5 2.5 0 .74-.33 1.39-.83 1.85l3.63 3.63c.98-1.86 1.7-3.8 1.7-5.48 0-3.87-3.13-7-7-7-1.98 0-3.76.83-5.04 2.15l3.19 3.19c.46-.52 1.11-.84 1.85-.84zm4.37 9.6l-4.63-4.63-.11-.11L3.27 3 2 4.27l3.18 3.18C5.07 7.95 5 8.47 5 9c0 5.25 7 13 7 13s1.67-1.85 3.38-4.35L18.73 21 20 19.73l-3.63-3.63z"></path>';break;default:t=s}return t}function calculatedPositon(e){var t,n,s={x:0,y:0};return t=e.point.x-12.94303529912,n=52.64611109803-e.point.y,s.x=Math.round(t/.00034508963),s.y=Math.round(n/.00020789677),s}setInterval(function(){deleteLiElements(),loadAccidents()},12e4),test();